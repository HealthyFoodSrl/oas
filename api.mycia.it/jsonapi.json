{
    "openapi": "3.0.3",
    "info": {
        "title": "api.mycia.it",
        "description": "This page contains the documentation on how to use MyCia through shared API calls.\n\n > Note: this spec is based on [jsonapi format v1.1](https://jsonapi.org/format/1.1/) and each request, response and structure SHALL conform to the standard.\n\n## Request Content-Type\n\nThe Content-Type for POST and PUT requests can be set to `application/x-www-form-urlencoded` or `multipart/form-data`;\n\nAdd an `Accept: application/json` header to the request to get the JSON response.\nSending requests with the `Accept` header is necessary if you want to use URLs\nfor related endpoints returned by the API, such as pagination URLs.\n\n## Authentication\n\nSome endpoints do not require any authentication, pretty much anything else will require you to be authenticated.\n\nTo become authenticated you will need to ask for your API Account.\n\nOnce you have your client API account you can pass it in along with your API id as an HTTP header like this:\n\n```\ncurl -X GET \"http://127.0.0.1:3000/v1/module/action\" \\\n-H \"Accept: application/json;\" \\\n-H \"client_id: your_client_id\" \\\n-H \"client_secret: your_client_secret\"\n```\n\nand this is how POST requests will look:\n\n```\ncurl -X POST \"http://127.0.0.1:3000/v1/module/action\" \\\n-H \"Content-Type: application/x-www-form-urlencoded;\" \\\n-H \"Accept: application/json;\" \\\n-H \"client_id: your_client_id\" \\\n-H \"client_secret: your_client_secret\" \\\n-F \"field1=data\" \\\n-F \"field2=data\" \\\n-F \"field3=data\"\n```",
        "version": "v1"
    },
    "servers": [
        {
            "url": "https://api-staging.mycia.it",
            "description": "Staging url"
        },
        {
            "url": "https://api.mycia.it",
            "description": "Base url"
        }
    ],
    "paths": {
        "/v1/bookings": {
            "get": {
                "tags": [
                    "Booking"
                ],
                "summary": "Get all bookings",
                "operationId": "getBookings",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Booking"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Booking"
                ],
                "summary": "Store a booking",
                "operationId": "storeBooking",
                "requestBody": {
                    "content": {
                        "application/x-www-form-urlencode": {
                            "schema": {
                                "properties": {
                                    "data": {
                                        "$ref": "#/components/schemas/BookingRequest"
                                    }
                                },
                                "required": [
                                    "data"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/BookingResponse"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Unprocessable Entity",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/EntityError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/v1/businesses": {
            "get": {
                "tags": [
                    "Business"
                ],
                "summary": "Get all businesses",
                "operationId": "getBusinesses",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object",
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "$ref": "#/components/schemas/Business"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Business"
                ],
                "summary": "Store a business",
                "operationId": "storeBusiness",
                "requestBody": {
                    "content": {
                        "application/x-www-form-urlencode": {
                            "schema": {
                                "properties": {
                                    "data": {
                                        "$ref": "#/components/schemas/BusinessRequest"
                                    }
                                },
                                "required": [
                                    "data"
                                ]
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "$ref": "#/components/schemas/BusinessResponse"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Unprocessable Entity",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/EntityError"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "Booking": {
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string",
                        "example": "booking"
                    },
                    "attributes": {
                        "type": "object",
                        "properties": {
                            "reserved_at": {
                                "type": "string",
                                "format": "date-time",
                                "example": "2023-01-01 12:00:00"
                            },
                            "seats": {
                                "type": "integer",
                                "example": 2
                            },
                            "status": {
                                "type": "string",
                                "example": "accepted"
                            },
                            "livemode": {
                                "type": "boolean",
                                "example": true
                            },
                            "note": {
                                "type": "string",
                                "nullable": true,
                                "example": "Lorem ipsum dolor.."
                            }
                        },
                        "required": [
                            "reserved_at",
                            "seats",
                            "status",
                            "livemode"
                        ]
                    }
                },
                "required": [
                    "type",
                    "attributes"
                ]
            },
            "BookingRequest": {
                "type": "object",
                "properties": {
                    "reserved_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2023-01-01 12:00:00"
                    },
                    "seats": {
                        "type": "integer",
                        "example": 2
                    },
                    "note": {
                        "type": "string",
                        "nullable": true,
                        "example": "Lorem ipsum dolor.."
                    }
                },
                "required": [
                    "reserved_at",
                    "seats"
                ]
            },
            "BookingResponse": {
                "type": "object",
                "properties": {
                    "reserved_at": {
                        "type": "string",
                        "format": "date-time",
                        "example": "2023-01-01 12:00:00"
                    },
                    "seats": {
                        "type": "integer",
                        "example": 2
                    },
                    "status": {
                        "type": "string",
                        "example": "accepted"
                    },
                    "note": {
                        "type": "string",
                        "nullable": true,
                        "example": "Lorem ipsum dolor.."
                    }
                }
            },
            "Business": {
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string",
                        "example": "business"
                    },
                    "attributes": {
                        "type": "object",
                        "properties": {
                            "token": {
                                "type": "string",
                                "example": "a1b2c3d4e"
                            },
                            "name": {
                                "type": "string",
                                "example": "Il Tiglio"
                            },
                            "email": {
                                "type": "string",
                                "example": "iltiglio@email.it"
                            },
                            "phone": {
                                "type": "string",
                                "example": "+393411234124"
                            },
                            "livemode": {
                                "type": "boolean",
                                "example": true
                            },
                            "is_visible": {
                                "type": "boolean",
                                "example": true
                            },
                            "description": {
                                "type": "string",
                                "nullable": true,
                                "example": "Lorem ipsum dolor est.."
                            },
                            "image_url": {
                                "type": "string",
                                "nullable": true,
                                "example": "https://domain.it/path/to/file.ext"
                            }
                        },
                        "required": [
                            "token",
                            "name",
                            "email",
                            "phone",
                            "livemode",
                            "is_visible"
                        ]
                    }
                },
                "required": [
                    "type",
                    "attributes"
                ]
            },
            "BusinessRequest": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "example": "Il Tiglio"
                    },
                    "email": {
                        "type": "string",
                        "example": "iltiglio@email.it"
                    },
                    "phone": {
                        "type": "string",
                        "example": "+393411234124"
                    },
                    "description": {
                        "type": "string",
                        "nullable": true,
                        "example": "Lorem ipsum dolor est.."
                    }
                },
                "required": [
                    "name",
                    "email",
                    "phone"
                ]
            },
            "BusinessResponse": {
                "type": "object",
                "properties": {
                    "token": {
                        "type": "string",
                        "example": "a1b2c3d4e"
                    },
                    "name": {
                        "type": "string",
                        "example": "Il Tiglio"
                    },
                    "email": {
                        "type": "string",
                        "example": "iltiglio@email.it"
                    },
                    "phone": {
                        "type": "string",
                        "example": "+393411234124"
                    },
                    "description": {
                        "type": "string",
                        "nullable": true,
                        "example": "Lorem ipsum dolor est.."
                    }
                }
            },
            "EntityError": {
                "type": "object",
                "properties": {
                    "message": {
                        "type": "string",
                        "example": "The given data was invalid."
                    },
                    "errors": {
                        "type": "object",
                        "properties": {
                            "data.attributes.fieldname": {
                                "type": "array",
                                "items": {
                                    "type": "string",
                                    "example": "The fieldname must be a valid JSON string."
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}
